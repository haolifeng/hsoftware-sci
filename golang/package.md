# 包

## 包声明
在每一个Go语言源文件的开头必须有包声明语句。包声明语句的主要目的时确定当前包被其他包导入时默认的标识符（也称为包名）。使用关键字package。通常以目录名为包名。
三个例外：
* 包对应一个可执行程序，也就是main包。在一个目录中只能有一个包名。如果想编写测试程序，需要另外创建一个目录。在另外创建的目录中使用main包，进行测试。

* 包所在目录中可能有一些文件是以test.go为后缀的Go源文件，而且这些源文件声明的包也是以_test为后缀名。

* 一些依赖版本号的管理工具会在导入路径后追加版本号信息，例如“gopkg.in/yarl.v2”。这种情况下包的名字并不包含版本号后缀。


## 导入路径
导入路径是目录的字符串。如果导入的包在GOROOT中，则从GOROOT/src开始。
例如
```
import (
    "fmt"
)
```
fmt的目录在GOROOT/src/fmt中。例如我的GOROOT为“/usr/local/go”，则fmt的目录在/usr/local/go/src/fmt。
如果导入的包在GOPATH中，

字符串从GOPATH中的个目录/src开始。例如有GOPATH有三个目录
```
export GOPATH=$HOME/GoDevPath:$HOME/Gopath:$HOME/Gotest。
```
则路径在$HOME/GoDevPath/src，$HOME/Gopath/src，或者$HOME/Gotest/src。

不要用linux用户中相对目录 **./**标记。


## 导出
+ 导出的变量、函数等都需要大写字母开头。
+ 包名要小写

## 包的init函数
### 特点
* 1.init函数可以在所有程序执行开始前被调用，并且每个包下可以有多个init函数
* 2.init函数先于main函数自动执行
* 3.每个包中可以有多个init函数，每个包中的源文件中也可以有多个init函数
* 4.init函数没有输入参数、返回值，也未声明，所以无法引用
* 5.不同包的init函数按照包导入的依赖关系决定执行顺序
* 6.无论包被导入多少次，init函数只会被调用一次，也就是只执行一次
* 7.init函数在代码中不能被显示的调用，不能被引用（赋值给函数变量），否则会出现编译错误
* 8.导入包不要出现循环依赖，这样会导致程序编译失败
* 9.Go程序仅仅想要用一个package的init执行，我们可以这样使用：import _ “test_xxxx”，导入包的时候加上下划线
* 10.包级别的变量初始化、init函数执行，这两个操作都是在同一个goroutine中调用的，按顺序调用，一次一个包
* 11.init函数不应该依赖任何在main函数里创建的变量，因为init函数的执行是在main函数之前的
* 12.在init函数中也可以启动goroutine，也就是在初始化的同时启动新的goroutine，这并不会影响初始化顺序
* 13.复杂逻辑不建议使用init函数，会增加代码的复杂性，可读性也会下降
* 14.一个源文件下可以有多个init函数，代码比较长时可以考虑分多个init函数

### 执行顺序
包加载优先级排在第一位，先层层递归进行包加载
每个包中加载顺序为：const > var > init，首先进行初始化的是常量，然后是变量，最后才是init函数。

## 包main
在任何一个单独的目录中，可以有多个文件，这些文件都需要添加“package main”，每个文件中可以有1个main函数。